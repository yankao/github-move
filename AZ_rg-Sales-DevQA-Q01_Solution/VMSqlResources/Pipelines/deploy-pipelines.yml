trigger:
  branches:
    include:
    - master
  paths:
    include:
    - AZ_rg-Sales-DevQA-Q01_Solution/VMSqlResources/Pipelines/deploy-pipelines.yml

pr: none

stages:
- stage: 
  jobs:
  - job: job_NIC
    steps:
    - template: ../PipelineTemplates/deploy-arm-template-02.yml
      parameters:
        parameterfilename: "CAPAZISQLC01.parameters.json"
        templatefilename: "virtual_machine_NICs.v2.3.deploy.json"
  - job: job_VM
    dependsOn: job_NIC
    condition: succeeded()
    steps:
    - template: ../PipelineTemplates/deploy-arm-template-02.yml
      parameters:
        parameterfilename: "CAPAZISQLC01.parameters.json"
        templatefilename: "virtual_machine.v2.2.deploy.json"
  - job: job_SQL
    dependsOn: job_VM
    condition: succeeded()
    steps:
    - template: ../PipelineTemplates/deploy-arm-template-02.yml
      parameters:
        parameterfilename: "CAPAZISQLC01.parameters.json"
        templatefilename: "virtual_machine_win_script.v2.2.deploy.json"
